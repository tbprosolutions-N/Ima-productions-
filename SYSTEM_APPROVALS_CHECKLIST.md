# IMA OS – רשימת אישורים למערכת

**תאריך:** 31 בינואר 2026  
**סטטוס:** כל המשימות הושלמו; המערכת מוכנה לאישור.

---

## מה בוצע – סיכום

### 1. טבלאות ראשיות – בחירה מרובה ומחיקה
- **לוח אירועים (Dashboard):** בחירת שורות (checkbox), סרגל פעולות "מחק נבחרים" / "נקה בחירה", מחיקה מ-Supabase (למנהל/בעלים).
- **אירועים (Events):** בחירה מרובה, מחיקה מרובה עם אישור, סנכרון ל-Supabase.

### 2. כספים וסנכרון דשבורד
- **הוצאות כספים:** נשמרות ב-Supabase (production) ו־localStorage (demo); אירוע `ima:expenses` לאחר כל עדכון.
- **דשבורד:** KPIs (הכנסות חודשיות, אירועים פעילים, תשלומים לאמנים, חשבוניות ממתינות) + **נגבה עד היום** – מחושב מאירועים שהסתיימו וסומנו כ"שולם".
- **סנכרון חי:** דשבורד מאזין ל־`ima:expenses` וטוען הוצאות מ-Supabase; רענון לפי `activityTick` ו־`financeExpenses`.

### 3. הגדרות > ניהול משתמשים
- **הוספת משתמש:** שדות שם, אימייל, תפקיד (מפיק/כספים/מנהל/בעלים) + תיבת "שלח הזמנה".
- **יכולות:** תיבות סימון – כספים, ניהול משתמשים, אינטגרציות, יצירת אירועים, מחיקת אירועים (עריכה לבעלים בלבד).
- **פרודקשן:** הזמנה דרך Edge Function `invite-user` (Supabase).

### 4. לוגו ושם חברה
- **לוגו:** במקום העלאה – placeholder טקסט "IMA" ב-Sidebar כשאין לוגו; אפשרות העלאה נשארת בהגדרות.
- **שם חברה:** שדה להזנת שם על ידי בעלים; שמירה ל־`agencies` ב-Supabase (או localStorage בדמו).

### 5. מחולל דוחות (Report Generator)
- **"Preset"** שונה ל־**"סוג דוח"**.
- **"מותאם אישית"** שונה ל־**"בחר/י דוח"**.
- כפתור **"Collection"** (סטטוס גבייה) בוטל ככפתור נפרד; הסטטוס נשאר כאפשרות בדוח.

### 6. דשבורד – נגבה עד היום ותובנות
- **כרטיס "נגבה עד היום":** סכום תשלומים מאירועים שהסתיימו וסומנו כ"שולם".
- **תובנות (Insights):** המלצות חיות – אירועים באיחור, חסרי תאריך תשלום/מסמך, איכות נתוני הוצאות, יחס הוצאות/הכנסות.

### 7. סיכום תקופה – UI
- **כספים:** כרטיס "סיכום תקופה" – תאריכים, נגבו/לתשלום לאמנים; דיאלוג דוח עם `max-h-[90vh]`, טבלה עם `max-h-[50vh]` וגלילה; תיבות סטטיסטיקה עם `min-h` אחיד.
- **לקוחות/אמנים:** דיאלוגי "תיק לקוח" ו"תיק אמן" – אותו עיצוב: גלילה, גובה מקסימלי לטבלה, תיבות סטטיסטיקה אחידות.

### 8. הגדרות > גיבוי נתונים
- **טאב "גיבוי נתונים"** (לבעלים): שדה לקישור גיבוי (Drive/Sheets), כפתור "שמור", כפתור "פתח בטאב חדש".
- הקישור נשמר ב־localStorage (ניתן להעביר ל-DB בעתיד).

### 9. אבטחה בהגדרות
- **סעיף אבטחה מורחב:** כותרת + תיאור.
- **חשבון והתחברות:** הצגת אימייל, שם מלא, תפקיד.
- **אבטחת חשבון:** שנה סיסמה, אימות דו־שלבי (2FA), SSO/Passkeys – עם הסבר קצר לכל אפשרות (פעולות כרגע placeholder).

---

## רשימת אישורים – מה לאשר

| # | נושא | תיאור | אישור |
|---|------|--------|--------|
| 1 | **בחירה מרובה ומחיקה** | טבלאות אירועים (דשבורד + אירועים) תומכות בסימון שורות ומחיקה מרובה. | ☐ |
| 2 | **סנכרון כספים–דשבורד** | הוצאות כספים מתעדכנות בדשבורד; KPIs כוללים "נגבה עד היום". | ☐ |
| 3 | **הוספת משתמש והרשאות** | הגדרות > ניהול משתמשים: הוספת משתמש, תפקיד ויכולות (כולל invite בפרודקשן). | ☐ |
| 4 | **לוגו ושם חברה** | לוגו: placeholder "IMA" ב-Sidebar; שם חברה ניתן לעריכה על ידי בעלים. | ☐ |
| 5 | **מחולל דוחות** | "סוג דוח", "בחר/י דוח"; ביטול כפתור Collection. | ☐ |
| 6 | **דשבורד – נגבה ותובנות** | כרטיס "נגבה עד היום" ותובנות חיות. | ☐ |
| 7 | **סיכום תקופה** | ויזואליזציה וגודל שדות בסיכום תקופה (כספים, לקוח, אמן) עם גלילה. | ☐ |
| 8 | **קישור גיבוי** | הגדרות > גיבוי נתונים: שמירת קישור ופתיחה בטאב חדש. | ☐ |
| 9 | **אבטחה** | סעיף אבטחה מורחב עם פרטי חשבון והגדרות סטנדרטיות. | ☐ |
| 10 | **זרימות כלליות** | התחברות, CRUD אירועים/לקוחות/אמנים/מסמכים, דוחות, הגדרות – פועלים כמצופה. | ☐ |

---

## הערות להמשך

- **שינוי סיסמה / 2FA / SSO:** כרגע placeholder; יש לחבר ל-Supabase Auth כשמוכנים.
- **קישור גיבוי:** שמירה ב-localStorage; ניתן לשמור ב-DB (למשל `agencies` או טבלת `settings`) לסנכרון בין מכשירים.
- **Edge Function `invite-user`:** נדרשת בפרודקשן להזמנת משתמשים; לוודא פריסה והגדרת `SUPABASE_SERVICE_ROLE_KEY`.

---

**סיום:** לאחר סימון כל התיבות ולאחר בדיקה ידנית/אוטומטית של הזרימות העיקריות – המערכת מאושרת לשימוש.
